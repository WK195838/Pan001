# 泛太總帳系統規格書

## 1. 基本資訊

| 項目 | 說明 |
|-----|------|
| 系統名稱 | 泛太總帳系統 |
| 系統代號 | GLATEST |
| 版本號碼 | 1.0.0 |
| 建立日期 | 2023/11/05 |
| 建立人員 | PanPacific開發團隊 |
| 最後修改日期 | 2023/11/05 |
| 最後修改人員 | PanPacific開發團隊 |

## 2. 系統概述

### 2.1 系統目的

泛太總帳系統旨在提供完整的財務會計管理解決方案，支援企業進行會計科目管理、交易記錄、財務報表生成及分析等功能。系統以Web架構實現，確保使用者可透過瀏覽器便捷存取，並提供高度客製化的報表與分析工具。

### 2.2 系統特點

1. 基於ASP.NET框架開發的Web應用程式
2. 採用多層架構設計，確保系統可維護性與擴展性
3. 支援完整的會計週期管理
4. 提供豐富的財務報表與分析工具
5. 多語系支援（繁體中文/英文）
6. 整合式的使用者權限管理
7. 完善的資料維護與查詢功能
8. 資料安全性控管

### 2.3 使用對象

1. 財務部門人員
2. 會計人員
3. 財務主管
4. 稽核人員
5. 系統管理員

## 3. 系統架構

### 3.1 技術架構

1. **前端技術**
   - HTML5、CSS3、JavaScript
   - jQuery 1.4.4與jQuery UI 1.8.7
   - ASP.NET Web Forms

2. **後端技術**
   - C#
   - .NET Framework 4.0
   - ADO.NET

3. **資料庫**
   - Microsoft SQL Server

4. **開發環境**
   - Visual Studio
   - SQL Server Management Studio

### 3.2 系統模組

```
泛太總帳系統
├── 系統管理模組
│   ├── 使用者管理
│   ├── 權限設定
│   ├── 系統參數設定
│   └── 系統日誌
├── 基本資料模組
│   ├── 公司資料維護
│   ├── 會計科目維護 (PTA0150)
│   └── 幣別維護
├── 交易處理模組
│   ├── 總帳交易維護 (PTA0170)
│   ├── 批次過帳處理
│   └── 交易查詢
└── 報表模組
    ├── 餘額試算表 (GLR0220)
    ├── 損益表 (GLR0230)
    └── 資產負債表 (GLR0240)
```

### 3.3 物理架構

系統物理部署採用三層架構：

1. **前端層**
   - Web伺服器：IIS
   - 前端頁面與腳本

2. **應用層**
   - 應用邏輯處理
   - 業務規則實現
   - 資料存取接口

3. **資料層**
   - 資料庫伺服器：SQL Server
   - 資料庫存儲與備份
   - 資料安全控管

## 4. 主要功能

### 4.1 系統管理功能

1. **使用者管理**
   - 使用者建立與維護
   - 角色設定與權限指派
   - 密碼政策管理

2. **權限設定**
   - 功能權限控管
   - 資料存取權限控管
   - 報表權限控管

3. **系統參數設定**
   - 系統基本參數
   - 會計期間設定
   - 日期格式設定（民國年/西元年）

4. **系統日誌**
   - 操作日誌記錄
   - 錯誤日誌記錄
   - 系統事件監控

### 4.2 基本資料功能

1. **公司資料維護**
   - 公司基本資料建立與維護
   - 組織架構設定
   - 交易控制參數設定

2. **會計科目維護 (PTA0150)**
   - 會計科目建立與維護
   - 科目階層關係設定
   - 科目類型與屬性設定
   - 預設分錄設定

3. **幣別維護**
   - 幣別資料建立與維護
   - 匯率設定
   - 匯率換算規則設定

### 4.3 交易處理功能

1. **總帳交易維護 (PTA0170)**
   - 會計分錄建立與維護
   - 分錄批次匯入
   - 分錄複製與修改
   - 交易審核與過帳

2. **批次過帳處理**
   - 批次分錄審核
   - 批次過帳處理
   - 期末結轉處理
   - 年度結轉處理

3. **交易查詢**
   - 交易歷史查詢
   - 交易明細查詢
   - 未過帳交易查詢
   - 交易批號查詢

### 4.4 報表功能

1. **餘額試算表 (GLR0220)**
   - 依科目層級彙總
   - 多種顯示格式
   - 期間比較功能
   - 匯出至Excel/PDF

2. **損益表 (GLR0230)**
   - 自訂格式設定
   - 期間比較分析
   - 預算比較分析
   - 匯出至Excel/PDF

3. **資產負債表 (GLR0240)**
   - 自訂格式設定
   - 期間比較分析
   - 匯出至Excel/PDF
   - 財務比率分析

## 5. 畫面規格

### 5.1 主要畫面

1. **系統主版面 (GLA.master)**
   - 提供系統整體框架與選單導航
   - 包含使用者認證、權限控制與工作階段管理
   - 基於ASP.NET Master Page實作

2. **詳細內容頁主版面 (GLADetail.master)**
   - 用於顯示詳細資料與表單操作
   - 適用於彈出視窗與專注型操作介面
   - 簡化版面，無側邊選單，專注內容呈現

3. **登入頁面**
   - 提供使用者認證功能
   - 支援密碼強度要求
   - 具備密碼錯誤處理機制

4. **首頁儀表板**
   - 顯示關鍵績效指標
   - 提供系統公告與重要資訊
   - 快速存取常用功能

### 5.2 共通控制項

1. **CompanyList.ascx**
   - 提供跨系統公司選單
   - 支援權限過濾
   - 整合公司資料庫存取

2. **CalendarControl.ascx**
   - 提供日期選擇控制項
   - 支援民國年/西元年顯示
   - 整合日期驗證功能

3. **UserSelector.ascx**
   - 提供使用者選擇功能
   - 支援多重選擇
   - 整合權限過濾

### 5.3 畫面布局標準

1. **主版面布局**
```
+--------------------------------------------------+
|                  系統標題 & LOGO                  |
+--------------------------------------------------+
| 功能選單                         使用者資訊      |
+--------------------------------------------------+
|        |                                         |
|        |                                         |
| 側邊   |                                         |
| 選單   |             主要內容區域                |
|        |                                         |
|        |                                         |
|        |                                         |
+--------------------------------------------------+
|              系統訊息 & 版權資訊                  |
+--------------------------------------------------+
```

2. **詳細內容頁布局**
```
+--------------------------------------------------+
|                  系統標題 & LOGO                  |
+--------------------------------------------------+
| 語言選擇                             回首頁按鈕  |
+--------------------------------------------------+
|                                                  |
|                   詳細標題列                     |
|                                                  |
|                                                  |
|                                                  |
|            內容頁面 (ContentPlaceHolder)         |
|                                                  |
|                                                  |
|                                                  |
+--------------------------------------------------+
|              系統訊息 & 版權資訊                  |
+--------------------------------------------------+
```

## 6. 系統流程

### 6.1 會計科目維護流程

```
開始
 ↓
登入系統
 ↓
選擇「會計科目維護」功能
 ↓
系統顯示科目清單
 ↓
新增/編輯會計科目
 ↓
輸入科目資料
 ↓
系統驗證資料正確性
 ↓
儲存科目資料
 ↓
結束
```

### 6.2 交易處理流程

```
開始
 ↓
登入系統
 ↓
選擇「總帳交易維護」功能
 ↓
系統顯示交易清單
 ↓
建立新交易單
 ↓
輸入交易資料
 ↓
系統驗證資料正確性
 ↓
儲存交易資料
 ↓
交易審核
 ↓
交易過帳
 ↓
結束
```

### 6.3 報表產生流程

```
開始
 ↓
登入系統
 ↓
選擇報表功能
 ↓
設定報表參數
 ↓
系統驗證參數
 ↓
產生報表
 ↓
檢視報表
 ↓
匯出/列印報表
 ↓
結束
```

### 6.4 過帳處理流程

```
開始
 ↓
選擇批次過帳功能
 ↓
設定過帳條件（期間/交易類型）
 ↓
系統檢核交易資料有效性
 ↓
執行過帳處理
 ↓
產生過帳報表
 ↓
確認過帳結果
 ↓
結束
```

## 7. 資料庫設計

### 7.1 主要資料表

1. **SYS_USER**：使用者資料表
   - USER_ID (PK)：使用者ID
   - USER_NAME：使用者名稱
   - LOGIN_ID：登入帳號
   - PASSWORD：密碼（加密）
   - EMAIL：電子郵件
   - STATUS：狀態（啟用/停用）
   - CREATE_DATE：建立日期
   - CREATE_USER：建立人員

2. **SYS_ROLE**：角色資料表
   - ROLE_ID (PK)：角色ID
   - ROLE_NAME：角色名稱
   - DESCRIPTION：角色描述
   - STATUS：狀態

3. **GL_COMPANY**：公司資料表
   - COMPANY_ID (PK)：公司代碼
   - COMPANY_NAME：公司名稱
   - COMPANY_SHORT_NAME：公司簡稱
   - TAX_ID：統一編號
   - ADDRESS：地址
   - PHONE：電話
   - STATUS：狀態

4. **GL_ACCOUNT**：會計科目資料表
   - COMPANY_ID (PK)：公司代碼
   - ACCOUNT_ID (PK)：科目代碼
   - ACCOUNT_NAME：科目名稱
   - ACCOUNT_TYPE：科目類型
   - ACCOUNT_LEVEL：科目階層
   - PARENT_ACCOUNT：上層科目
   - BS_TYPE：資產負債表類型
   - PL_TYPE：損益表類型
   - STATUS：狀態

5. **GL_TRANSACTION**：總帳交易資料表
   - COMPANY_ID (PK)：公司代碼
   - TRAN_ID (PK)：交易編號
   - TRAN_DATE：交易日期
   - TRAN_TYPE：交易類型
   - PERIOD：會計期間
   - CURRENCY：交易幣別
   - EXCHANGE_RATE：匯率
   - DESCRIPTION：交易描述
   - STATUS：狀態
   - POST_DATE：過帳日期
   - CREATE_USER：建立人員
   - CREATE_DATE：建立日期

6. **GL_TRANSACTION_DTL**：總帳交易明細資料表
   - COMPANY_ID (PK)：公司代碼
   - TRAN_ID (PK)：交易編號
   - LINE_NO (PK)：明細行號
   - ACCOUNT_ID：科目代碼
   - DC_FLAG：借貸別
   - AMOUNT：金額
   - DESCRIPTION：明細描述

### 7.2 資料庫關聯圖

```
SYS_USER <---> SYS_USER_ROLE <---> SYS_ROLE
   |
   v
SYS_USER_COMPANY <---> GL_COMPANY
                          |
                          v
                        GL_ACCOUNT
                          |
                          v
GL_TRANSACTION_DTL <--- GL_TRANSACTION <---> GL_FISCAL_PERIOD
     |
     v
  GL_ACCOUNT
```

## 8. 安全性設計

### 8.1 認證機制

1. **表單式認證**
   - 使用ASP.NET Forms Authentication
   - 集中式登入頁面
   - 使用者名稱/密碼驗證

2. **密碼安全**
   - 密碼加密儲存（SHA-256）
   - 密碼複雜度要求
   - 密碼定期更換機制
   - 密碼歷史記錄檢查

3. **登入保護**
   - 登入失敗次數限制
   - 帳號鎖定機制
   - 登入嘗試記錄

### 8.2 授權機制

1. **角色型存取控制**
   - 以角色為基礎的權限控管
   - 精細的功能權限設定
   - 功能按鈕級別的權限控制

2. **資料存取控制**
   - 公司層級的資料隔離
   - 部門資料存取限制
   - 資料敏感性標記與處理

### 8.3 資料安全

1. **資料傳輸安全**
   - 使用HTTPS加密傳輸
   - 敏感資料加密
   - 資料完整性檢查

2. **資料儲存安全**
   - 關鍵資料加密儲存
   - 資料庫存取權限控制
   - 定期備份與還原機制

3. **應用程式安全**
   - 輸入驗證與資料清理
   - SQL注入防護
   - 跨站腳本攻擊(XSS)防護
   - 跨站請求偽造(CSRF)防護

## 9. 系統整合

### 9.1 外部系統整合

1. **ERP系統整合**
   - 資料同步機制
   - 交易資料匯入/匯出
   - 主檔資料共享

2. **人力資源系統整合**
   - 使用者資料同步
   - 組織結構同步
   - 單一登入(SSO)支援

### 9.2 資料交換標準

1. **檔案格式**
   - CSV格式
   - XML格式
   - Excel格式

2. **Web服務**
   - SOAP Web Services
   - REST API
   - JSON資料交換

### 9.3 批次處理機制

1. **資料匯入批次**
   - 科目批次匯入
   - 交易批次匯入
   - 匯率批次更新

2. **排程作業**
   - 每日資料同步
   - 期末結轉處理
   - 報表自動產生

## 10. 系統參數

### 10.1 基礎參數

| 參數代碼 | 參數名稱 | 參數說明 | 預設值 |
|---------|---------|---------|-------|
| SYS_TITLE | 系統標題 | 系統顯示名稱 | 泛太總帳系統 |
| SYS_VERSION | 系統版本 | 顯示於頁尾的版本號 | 1.0.0 |
| COPYRIGHT | 版權宣告 | 系統版權宣告文字 | © 2023 PanPacific |

### 10.2 功能參數

| 參數代碼 | 參數名稱 | 參數說明 | 預設值 |
|---------|---------|---------|-------|
| DEFAULT_ROWS | 預設顯示筆數 | 列表預設顯示筆數 | 20 |
| EXPORT_LIMIT | 匯出上限 | 匯出Excel的最大筆數 | 5000 |
| SESSION_TIMEOUT | 工作階段逾時 | 工作階段逾時分鐘數 | 30 |

### 10.3 會計參數

| 參數代碼 | 參數名稱 | 參數說明 | 預設值 |
|---------|---------|---------|-------|
| DEFAULT_CURRENCY | 預設幣別 | 系統預設交易幣別 | TWD |
| FISCAL_YEAR_BEGIN | 會計年度起始月 | 會計年度起始月份 | 1 |
| TWCalendar | 民國年設定 | 是否使用民國年格式 | Y |
| GL_AUTO_POST | 自動過帳設定 | 是否啟用自動過帳 | N |

## 11. 效能與容量規劃

### 11.1 系統效能目標

1. **回應時間**
   - 頁面載入時間：< 3秒
   - 資料查詢回應：< 5秒
   - 報表產生時間：< 30秒

2. **系統處理能力**
   - 支援同時在線用戶：50人
   - 每日交易處理量：5,000筆
   - 資料庫資料量：5年內資料

### 11.2 擴展性規劃

1. **硬體擴展**
   - 伺服器叢集支援
   - 負載平衡機制
   - 資料庫分割策略

2. **軟體擴展**
   - 模組化設計
   - 微服務架構預備
   - API彈性設計

### 11.3 備份與復原策略

1. **備份策略**
   - 資料庫每日完整備份
   - 交易日誌每小時備份
   - 應用程式設定定期備份

2. **復原策略**
   - 資料庫復原程序
   - 應用程式復原程序
   - 災難復原計劃

## 12. 測試策略

### 12.1 測試種類

1. **單元測試**
   - 程式模組測試
   - 資料存取測試
   - 業務邏輯測試

2. **整合測試**
   - 模組間整合測試
   - 外部系統整合測試
   - 資料流程測試

3. **系統測試**
   - 功能性測試
   - 非功能性測試
   - 使用者介面測試

4. **使用者接受測試**
   - 功能驗收
   - 效能驗收
   - 安全性驗收

### 12.2 測試環境

1. **開發環境**
   - 開發人員本機測試
   - 程式碼審核與測試

2. **測試環境**
   - 功能整合測試
   - 系統測試

3. **UAT環境**
   - 使用者接受測試
   - 效能與負載測試

4. **生產環境**
   - 上線前測試
   - 上線後監控

## 13. 部署與上線計劃

### 13.1 部署環境需求

1. **硬體需求**
   - 應用伺服器：Windows Server 2016以上
   - 資料庫伺服器：Windows Server 2016以上
   - 記憶體：16GB以上
   - 硬碟空間：500GB以上

2. **軟體需求**
   - Web服務器：IIS 10以上
   - 資料庫：SQL Server 2016以上
   - .NET Framework：4.7.2以上

### 13.2 上線流程

```
開始
 ↓
環境準備
 ↓
資料庫部署
 ↓
應用程式部署
 ↓
系統設定
 ↓
上線前測試
 ↓
使用者培訓
 ↓
正式上線
 ↓
上線後支援
 ↓
結束
```

### 13.3 上線後支援

1. **即時支援**
   - 電話支援
   - 遠端支援
   - 現場支援

2. **定期維護**
   - 系統健檢
   - 效能調校
   - 安全性更新

## 14. 教育訓練計劃

### 14.1 訓練對象

1. 系統管理員
2. 主要使用者
3. 一般使用者
4. IT支援人員

### 14.2 訓練內容

1. **系統管理訓練**
   - 系統架構與配置
   - 使用者與權限管理
   - 系統參數設定
   - 系統監控與維護

2. **使用者訓練**
   - 系統基本操作
   - 模組功能培訓
   - 資料維護作業
   - 報表產生與分析

### 14.3 訓練方式

1. 實體課堂訓練
2. 線上視訊訓練
3. 系統操作手冊
4. 知識庫與常見問題

## 15. 專案時程

### 15.1 開發階段

| 階段 | 時程 | 交付項目 |
|-----|------|---------|
| 需求分析 | 2週 | 需求規格書 |
| 系統設計 | 3週 | 系統設計文件 |
| 第一階段開發 | 6週 | 核心交易處理模組 |
| 第二階段開發 | 4週 | 重要報表模組 |
| 第三階段開發 | 3週 | 系統整合與界面優化 |
| 系統測試 | 3週 | 測試報告與修正 |
| 使用者測試 | 2週 | 使用者回饋與調整 |

### 15.2 上線階段

| 階段 | 時程 | 交付項目 |
|-----|------|---------|
| 環境準備 | 1週 | 部署環境建置 |
| 系統部署 | 1週 | 應用程式與資料庫部署 |
| 教育訓練 | 2週 | 使用者培訓 |
| 正式上線 | 1週 | 系統正式運行 |
| 上線支援 | 4週 | 問題解決與系統調整 |

## 16. 未來擴展計劃

### 16.1 短期計劃 (6個月內)

1. 完善使用者介面與體驗
2. 新增更多財務報表模板
3. 增強批次作業處理功能
4. 優化系統效能

### 16.2 中期計劃 (1年內)

1. 新增手機版支援
2. 整合商業智能分析工具
3. 擴展第三方系統整合能力
4. 增加資料視覺化功能

### 16.3 長期計劃 (2年內)

1. 雲端部署支援
2. 多租戶架構改造
3. AI輔助分析功能開發
4. 區塊鏈交易追蹤技術整合

## 17. 附錄

### 17.1 常見問題

1. **系統需求**
   - Q: 系統支援哪些瀏覽器？
   - A: 支援IE11、Edge、Chrome、Firefox等主流瀏覽器

2. **資料安全**
   - Q: 敏感資料如何保護？
   - A: 透過加密儲存、HTTPS傳輸以及權限控管進行保護

3. **整合問題**
   - Q: 如何與現有系統整合？
   - A: 提供標準API介面，支援檔案匯入匯出與即時資料交換

### 17.2 術語表

| 術語 | 定義 |
|-----|------|
| 會計科目 | 用於記錄財務交易的分類標籤 |
| 總帳 | 包含所有財務交易的主要會計記錄 |
| 分錄 | 記錄財務交易的會計單位 |
| 過帳 | 將交易正式記錄到總帳的程序 |
| 會計期間 | 財務報表涵蓋的時間區段 |
| 結轉 | 期末處理程序，將損益科目餘額轉入保留盈餘 |

### 17.3 相關文件

1. 程式規格書 - 會計科目維護(PTA0150)
2. 程式規格書 - 總帳交易維護(PTA0170)
3. 程式規格書 - 餘額試算表(GLR0220)
4. 程式規格書 - 損益表(GLR0230)
5. 程式規格書 - 資產負債表(GLR0240)
6. 程式規格書 - 系統主版面(GLA.master)
7. 程式規格書 - 詳細內容頁主版面(GLADetail.master)
8. 使用者操作手冊
9. 系統管理手冊
10. 資料庫設計文件

## 18. 修改歷史

| 版本號 | 修改日期 | 修改人員 | 修改內容 | 備註 |
|-------|---------|---------|---------|------|
| 1.0.0 | 2023/11/05 | PanPacific開發團隊 | 初版建立 | 初次建立系統規格書 | 